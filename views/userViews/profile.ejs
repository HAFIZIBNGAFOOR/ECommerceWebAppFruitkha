<%- include('../layouts/header.ejs') %>
<% if(typeof user !== "undefined"){ %>
	<%- include('userLogged') %>

<% }else{ %>
	<%- include('noUser') %>
	<% } %>
	<!-- breadcrumb-section -->
	<div class="breadcrumb-section breadcrumb-bg">
		<div class="container">
			<div class="row">
				<div class="col-lg-8 offset-lg-2 text-center">
					<div class="breadcrumb-text">
						<p>Details of user</p>
						<h1>Profile</h1>
					</div>
				</div>
			</div>
		</div>
	</div>
	<!-- end breadcrumb section -->

	<!-- contact form -->
	<div class="contact-from-section mt-150 mb-150">
		<div class="container">
			<div class="row">
				<div class="col-lg-4 col-md-6 mt-5">
					<!-- <div class="contact-form-wrap"> -->
					  <div class="contact-form-box">
						<a href="/address">
						  <div class="card-body" style="background-color: #F28123; text-align: center; width: 250px; height: 60px;">
							<h4 style="color:#07212e;"><i class="address"></i> Manage Address</h4>
						  </div>
						</a>
					  </div>
					  <div class="contact-form-box">
						<a href="/orders">
						  <div class="card-body" style="background-color: #F28123; text-align: center; width: 250px; height: 60px;">
							<h4 style="color:#07212e;"><i class="address"></i> View Orders</h4>
						  </div>
						</a>
					  </div>
					  <div class="contact-form-box round">
						<a href="/forgotPassword">
						  <div class="card-body" style="background-color: #F28123; text-align: center; width: 250px; height: 60px;">
							<h4 style="color:#07212e;"><i class="address"></i> Change Password</h4>
						  </div>
						</a>
					  </div>
					<!-- </div> -->
				  </div>
				  <div class="col-lg-8 lp-2  ">
					<div class="form-title">
					  <h2 style="color: #051922;">Profile</h2>
					</div>
					<div id="form_status"></div>
					<div class="contact-form">
					  <form method="post" id="form-id">
						<p style="color:#F28123;">
						  <input style="color: #07212e;" type="text" placeholder="First Name" value="<%= user.fname %>" name="fname" id="fname" disabled>
						  <input style="color: #07212e;" type="text" placeholder="Last Name" value="<%= user.lname %>" name="lname" id="lname" disabled>
						</p>
						<p style="color:#F28123;">
						  <input style="color: #07212e;" type="tel" placeholder="Mobile" value="<%= user.mobile %>" name="phone" id="mobile" disabled>
						  <input style="color: #07212e;" type="email" placeholder="Email" value="<%= user.email %>" name="email" id="email" disabled>
						</p>
						<p style="color:#F28123;">
						  <label style="color: #07212e;" for="date">Gender:</label>
						  <select name="gender" placeholder="Gender" id="gender">
							<option value="male">Male</option>
							<option value="female">Female</option>
							<option value="other">Other</option>
						  </select>
						</p>
						<p onclick="enableInput()" style="background-color: #F28123;text-align: center; border-radius: 10px;">
						  <a id="submit-button" class="btn btn-gradient-danger btn-icon-text">
							<b> Edit</b>
						  </a>
						</p>
					  </form>
					</div>
				  </div>
				
			</div>
		</div>
	</div>
	<!-- end contact form -->

	

	<!-- footer -->
	<div class="footer-area">
		<div class="container">
			<div class="row">
				<div class="col-lg-3 col-md-6">
					<div class="footer-box about-widget">
						<h2 class="widget-title">About us</h2>
						<p>Ut enim ad minim veniam perspiciatis unde omnis iste natus error sit voluptatem accusantium doloremque laudantium, totam rem aperiam, eaque ipsa quae.</p>
					</div>
				</div>
				<div class="col-lg-3 col-md-6">
					<div class="footer-box get-in-touch">
						<h2 class="widget-title">Get in Touch</h2>
						<ul>
							<li>34/8, East Hukupara, Gifirtok, Sadan.</li>
							<li>support@fruitkha.com</li>
							<li>+00 111 222 3333</li>
						</ul>
					</div>
				</div>
				<div class="col-lg-3 col-md-6">
					<div class="footer-box pages">
						<h2 class="widget-title">Pages</h2>
						<ul>
							<li><a href="/">Home</a></li>
							<li><a >About</a></li>
							<li><a href="/shop">Shop</a></li>
							<li><a href="news.html">News</a></li>
							<li><a href="contact.html">Contact</a></li>
						</ul>
					</div>
				</div>
				<div class="col-lg-3 col-md-6">
					<div class="footer-box subscribe">
						<h2 class="widget-title">Subscribe</h2>
						<p>Subscribe to our mailing list to get the latest updates.</p>
						<form action="index.html">
							<input type="email" placeholder="Email">
							<button  type="submit"><i class="fas fa-paper-plane"></i></button>
						</form>
					</div>
				</div>
			</div>
		</div>
	</div>
	<!-- end footer -->
	
	<!-- copyright -->
	<div class="copyright">
		<div class="container">
			<div class="row">
				<div class="col-lg-6 col-md-12">
					<p>Copyrights &copy; 2019 - <a href="https://imransdesign.com/">Imran Hossain</a>,  All Rights Reserved.<br>
						Distributed By - <a href="https://themewagon.com/">Themewagon</a>
					</p>
				</div>
				<div class="col-lg-6 text-right col-md-12">
					<div class="social-icons">
						<ul>
							<li><a href="#" target="_blank"><i class="fab fa-facebook-f"></i></a></li>
							<li><a href="#" target="_blank"><i class="fab fa-twitter"></i></a></li>
							<li><a href="#" target="_blank"><i class="fab fa-instagram"></i></a></li>
							<li><a href="#" target="_blank"><i class="fab fa-linkedin"></i></a></li>
							<li><a href="#" target="_blank"><i class="fab fa-dribbble"></i></a></li>
						</ul>
					</div>
				</div>
			</div>
		</div>
	</div>
	<!-- end copyright -->
</body>
</html>
	<!-- jquery -->
	<script src="/js/jquery-1.11.3.min.js"></script>
	<!-- bootstrap -->
	<script src="/bootstrap/js/bootstrap.min.js"></script>
	<!-- count down -->
	<script src="/js/jquery.countdown.js"></script>
	<!-- isotope -->
	<script src="/js/jquery.isotope-3.0.6.min.js"></script>
	<!-- waypoints -->
	<script src="/js/waypoints.js"></script>
	<!-- owl carousel -->
	<script src="/js/owl.carousel.min.js"></script>
	<!-- magnific popup -->
	<script src="/js/jquery.magnific-popup.min.js"></script>
	<!-- mean menu -->
	<script src="/js/jquery.meanmenu.min.js"></script>
	<!-- sticker js -->
	<script src="/js/sticker.js"></script>
	<!-- form validation js -->
	<script src="/js/form-validate.js"></script>
	<!-- main js -->
	<script src="/js/main.js"></script>
	<script>
	function enableInput() {
		const fname = document.getElementById('fname');
		const lname = document.getElementById('lname');
		const email = document.getElementById('email');
		const mobile = document.getElementById('mobile');
		const gender = document.getElementById('gender');
		const editButton = document.getElementById('submit-button');

		if (fname.disabled) {
			fname.disabled = false;
			lname.disabled = false;
			email.disabled = false;
			mobile.disabled = false;
			gender.disabled = false;
			editButton.innerHTML = '<b>Save</b>';
			editButton.removeAttribute('id');
			editButton.setAttribute('id', 'save-button');
			editButton.removeEventListener('click', enableInput);
			editButton.addEventListener('click', saveChanges);
		} else {
			fname.disabled = true;
			lname.disabled = true;
			email.disabled = true;
			mobile.disabled = true;
			gender.disabled = true;
			editButton.innerHTML = '<b>Edit</b>';
			editButton.removeAttribute('id');
			editButton.setAttribute('id', 'submit-button');

			editButton.removeEventListener('click', saveChanges);

			editButton.addEventListener('click', enableInput);
		}
		}

		function saveChanges() {
			const fname = document.getElementById('fname').value;
			const lname = document.getElementById('lname').value;
			const email = document.getElementById('email').value;
			const gender = document.getElementById('gender').value;
			const mobile = document.getElementById('mobile').value;

			fetch('/profile', {
				method: 'POST',
				headers: {
				'Content-Type': 'application/json'
				},
				body: JSON.stringify({ fname, lname, email, gender, mobile })
			})
			.then(response => response.json())
			.then(result => console.log(result));
			}

		const editButton = document.getElementById('submit-button');
		editButton.addEventListener('click', enableInput);

	</script>
